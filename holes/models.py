from django.db import models

# Create your models here.

class PageManager(models.Manager):
    '''
        RestFramework and Django allows 'pagination'.
        It can be used as (better?) alternative.
    '''
    def get_page(self, page, page_size):
        page = page or 1
        page_size = page_size or 20
        start_index = (int(page) - 1) * int(page_size)
        end_index = start_index + int(page_size)
        return self.all().order_by('id')[start_index : end_index]

class Component(models.Model):
    id          = models.CharField(max_length=11, primary_key=True)
    producer    = models.CharField(max_length=40)
    product     = models.CharField(max_length=40)
    version     = models.CharField(max_length=40)
    timestamp   = models.DateTimeField(auto_now_add=True)

    objects = PageManager()


class Hole(models.Model):
    id          = models.CharField(max_length=11, primary_key=True)
    description = models.TextField()
    components  = models.ManyToManyField(Component, related_name='holes')
    timestamp   = models.DateTimeField(auto_now_add=True)
    
    objects = PageManager()
