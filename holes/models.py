from django.db import models

# Create your models here.

class PageManager(models.Manager):
    def get_page(self, page, page_size):
        start_index = (int(page) - 1) * int(page_size)
        end_index = start_index + int(page_size)
        return self.all()[start_index : end_index]

class Component(models.Model):
    id          = models.CharField(max_length=11, primary_key=True)
    producer    = models.CharField(max_length=40)
    product     = models.CharField(max_length=40)
    version     = models.CharField(max_length=40)

    objects = PageManager()

    def __str__(self):
        return '{} ver. {} by {}'.format(self.product, self.version, self.producer)

class Hole(models.Model):
    id          = models.CharField(max_length=11, primary_key=True)
    description = models.TextField()
    components  = models.ManyToManyField(Component, related_name='holes')

    objects = PageManager()
